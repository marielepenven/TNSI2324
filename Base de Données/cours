# Les bases de donn√©es relationnelles. 



Une base de donn√©es est un ensemble structur√© de fichiers regroupant des informations ayant certains caract√®res en commun. * D' apr√®s le petit Larousse *

Un syst√®me de gestion de base de donn√©es (SGBD) est le logiciel qui permet √† un ordinateur de stocker, r√©cup√©rer, ajouter, supprimer et modifier des donn√©es. Un SGBD g√®re tous les aspects primaires d'une base de donn√©es, y compris la gestion de la manipulation des donn√©es, comme l'authentification des utilisateurs, ainsi que l'insertion ou l'extraction des donn√©es. Un SGBD d√©finit ce qu'on appelle le sch√©ma de donn√©es ou la structure dans laquelle les donn√©es sont stock√©es.



## I. Le mod√®le relationnel. 

### a. Une probl√©matique actuelle.

Les donn√©es et la gestion de ces donn√©es sont devenues des enjeux tr√®s importants. La quantit√© de donn√©es est gigantesque. Il faut les stocker et les organiser au mieux pour les rendre disponibles. 

En classe de premi√®re, nous avions travaill√© sur des donn√©es structur√©es stock√©es dans des fichiers CSV. Cette technique a l'avantage d'√™tre simple et pratique mais pr√©sente des limites:

- s√©curit√© et confidentialit√© inexistantes,
- difficult√©s pour partager le fichier entre plusieurs utilisateurs en lecture et √©criture;
- difficult√©s √† lier plusieurs tables csv entre elles. 

Depuis plusieurs ann√©es, l'utilisation de tables de donn√©es relationnelles est la solution. Toutefois, la recherche travaille sur des concepts encore plus innovants. 

En 1970, [Edgar Frank Codd]([Edgar Frank Codd ‚Äî Wikip√©dia (wikipedia.org)](https://fr.wikipedia.org/wiki/Edgar_Frank_Codd)), surnomm√© Ted Codd, qui travaillait au laboratoire IBM, propose un mod√®le logique pour g√©rer le partage de gros volumes de donn√©es. A la base de son mod√®le se trouvent des notions math√©matiques comme le langage ensembliste, les relations et la logique. Le premier syst√®me voit le jour dix ans plus tard avec la soci√©t√© Oracle. Edgar Frank Codd a re√ßu le prix Turing en 1981. 

Le principe est de mod√©liser des relations entre plusieurs informations et de les ordonner entre elles. 

### b. Les relations. 

Une **base de donn√©e relationnelle ** est une base de donn√©es o√π l'information est organis√©e dans des tableaux √† deux dimensions appel√©s de relations ou tables. 

Les lignes de ces relations sont appel√©es des **enregistrements** (ou n-uplets). 

*Attention, chaque enregistrement est unique: il est interdit d'avoir, dans une relation, deux fois la m√™me ligne.*

Les colonnes sont appel√©es des **attributs**. 

Chaque case est une **entr√©e**, aussi appel√©e valeurs.

Le tableau de la relation a une particularit√©: on peut intervertir les lignes entre elles ou les colonnes entre elles sans que cela ne change quoi que ce soit √† la relation. 

Prenons un exemple: imaginons la base de donn√©es relatives √† une biblioth√®que. 

Soit une table, appel√©e Livres, r√©pertoriant les livres disponibles √† l'emprunt dans cette biblioth√®que.

 Chaque livre poss√®de une r√©f√©rence qui lui sert d'identifiant. 

 

| R√©f√©rence | Titre                                                        | Nom de l'auteur | Pr√©nom de l'auteur | Identifiant_Auteur | Editeur              | Emprunt | Date de retour |
| --------- | ------------------------------------------------------------ | --------------- | ------------------ | ------------------ | -------------------- | ------- | -------------- |
| 1         | Les jours de ton absence                                     | Walsh           | Rosie              | 45                 | Les escales √©ditions |         |                |
| 2         | Temps glaciaires                                             | Vargas          | Fred               | 174                | Flammarion           | 16      | 02/03/23       |
| 3         | Ce qui reste de nos vies                                     | Shalev          | Zeruya             | 289                | Gallimard            | 23      | 14/05/23       |
| 4         | Culotttes. Des femmes qui ne font que ce qu'elles veulent (Tome 2) | Bagieu          | P√©n√©loppe          | 2213               | Gallimard BD         |         |                |
| 5         | Le beau myst√®re                                              | Penny           | Louise             | 458                | Actes Sud            | 453     | 23/04/23       |
| 6         | Une famille d√©licieuse                                       | Marsh           | Willa              | 1045               | Autrement            |         |                |
| 7         | La beaut√© des jours                                          | Gallay          | Claudie            | 467                | Actes Sud            | 74      | 14/06/23       |
| 8         | Ne pars pas avant moi                                        | Rouart          | Jean-Marie         | 485                | Gallimard            | 41      | 12/02/23       |
| 9         | L'heure qui les s√©pare                                       | Matar           | Hisham             | 13                 | Gallimard            |         |                |

Nous avons, dans cet exemple, mod√©lis√© les objets livres en identifiant plusieurs attributs qui sont : la r√©f√©rence, le titre, le nom de l'auteur, le pr√©nom de l'auteur,l'identifiant de l'auteur, l'√©diteur ainsi que l'identifiant de l'adh√©rent ayant emprunt√© ce livre. 

Nous pourrions imaginer d'autres objets √† mod√©liser tel que les adh√©rents, les DVD, les p√©riodiques, les auteurs de livres....

Les objets disposent d'une multitude de liens entre eux. 

Par exemple, un livre peut √™tre en lien avec un auteur ainsi qu'avec, √©ventuellement, un adh√©rent ayant emprunt√© le livre. 



Mod√©liser une donn√©e de fa√ßon relationnel revient √† penser les donn√©es de son application sous forme d‚Äôune **multitude d‚Äôobjets** qui disposent de **relations** permettant de les **lier** ensemble. La mod√©lisation de la base de donn√©es am√®ne √† la g√©n√©ration d‚Äôun **sch√©ma** de la base de donn√©es. 

### c. Domaine ###

Chaque attribut prend ses valeurs dans un ensemble appel√© **domaine**. 

Un **domaine** peut √™tre:

- les cha√Ænes de caract√®res: CHAR (cha√Ænes de caract√®res √† taille fixe) oui VARCHAR (cha√Ænes de caract√®res √† taille variable). 
- l'ensemble des nombres entiers ou une partie d'entre eux. Il y a d'ailleurs diff√©rents types d'entiers: INT, TINYINT, SMALLINT, LONGINT, ....
- L'ensemble des nombres flottants ou une partie d'entre eux: FLOAT, DECIMAL, REAL..
- Les bool√©ens: BOOL 
- Les champs de type DATE ou TIME pour mesurer le temps. 



Le choix du type conditionne la taille de la base de donn√©es. C'est pourquoi les types disponibles sont nombreux. Ils permettent d'optimiser la place n√©cessaire au stockage. Il n'est pas besoin, par exemple, d'utiliser le type LONGINT pour stocker les num√©ros des d√©partements fran√ßais. 

De plus, le choix de domaine doit limiter autant que possible la saisie des valeurs ill√©gales ou mal form√©es. 

Reprenons notre exempe pr√©c√©dent:

Le domaine de R√©f√©rence est un entier. 

Le domaine de Titre est une cha√Æne de caract√®res. 



### d. Cl√© primaire (ou Primary Key in english).

Dans une relation, une cl√© primaire est un attribut, ou un groupe d'attribut, qui identifie de mani√®re unique les valeurs des autres attributs. Elle ne doit pas √™tre NULL (vide), peut √™tre compos√©e d'une ou plusieurs colonnes. 

L'existence d'une cl√© primaire est une contrainte d'unicit√© qui permet de v√©rifier qu'il n'existe pas deux enregistrements identiques dans la base, ce qui est interdit. 

Reprenons notre exemple pr√©c√©dent:

R√©f√©rence est une cl√© primaire. C'est la seule possible. 

### e. Cl√© √©trang√®re  (ou Foreign Key). 

Un attribut d'une relation peut prendre pour valeurs les valeurs d'un attribut, ou d'un groupe d'attributs qui constitue une cl√© primaire d'une autre relation. Un tel attribut est appel√© **cl√© √©trang√®re**. 

Une cl√© √©trang√®re fait le lien avec une cl√© primaire d'une autre table. Ses valeurs doivent pr√©-exister dans la table qu'elle r√©f√©rence. Elle relie deux tables de mani√®re coh√©rente. 

Reprenons notre exemple pr√©c√©dent:

Identifiant_Auteur est une cl√© √©trang√®re. Elle fait r√©f√©rence √† l'identifiant de l'auteur du livre. 

Emprunt est une cl√© √©trang√®re. Elle fait r√©f√©rence √† l'identifiant des abonn√©s de la biblioth√®que. 

### f. Sch√©ma relationnel. 

Un **sch√©ma de relation ** pr√©cise le nom, les attributs et leurs domaines, la cl√© primaire et √©ventuellement la (ou les ) cl√© (s) √©trang√®re(s) d'une relation. 

Ainsi le sch√©ma de relation de Livres est:

Livres (R√©f√©rence(PK):INT,  Titre: VARCHAR,  Nom de l'auteur: VARCHAR , Pr√©nom de l'auteur : VARCHAR,Identifiant_Auteur(FK):INT, Editeur: VARCHAR,  Emprunt(FK):INT,   Date de retour: DATE)

Construisons les sch√©ma de relation de Adh√©rents et de Auteur. 

Adh√©rents(Identifiant(PK):INT,Nom: VARCHAR,Prenom:VARCHAR,Date de naissance:DATE,Adresse mail: VARCHAR)

Auteur(Identifiant(PK):INT,Nom: VARCHAR, Prenom:VARCHAR)

On appelle **sch√©ma relationnel**  l'ensemble de tous les sch√©mas de relation d'une base de donn√©es. 

Graphiquement, on peut repr√©senter le sch√©ma relationnel de notre base ainsi:

![sch√©ma relationnel](D:\DISQUE ESSB\lycee\T NSI\base de donn√©es\sch√©ma relationnel.jpg)



## II. Syst√®me de Gestion de Bases de Donn√©es.  



Pour acc√©der √† une base de donn√©es, on utilise un SGBD, un syst√®me de gestion de base de donn√©es.  

Un SGBD peut √™tre:

- un logiciel, comme MySQL, fonctionnant avec un serveur. 
- un composant logiciel, comme SQLite qui est une biblioth√®que, avec une interface directement int√©grable dans un programme.

### a. Fonctionnalit√©s. 

Un SGBD permet d'enregistrer des donn√©es, puis de les rechercher, de les modifier et de cr√©er automatiquement des comptes rendus (anglais *report*) du contenu de la base de donn√©es. Il permet de sp√©cifier les types de donn√©es, la structure des donn√©es contenues dans la base de donn√©es, ainsi que des r√®gles de coh√©rence telles que l'absence de redondance. 

Les caract√©ristiques des donn√©es enregistr√©es dans la base de donn√©es, ainsi que les relations, les r√®gles de coh√©rence et les listes de contr√¥le d'acc√®s sont enregistr√©es dans un catalogue qui se trouve √† l'int√©rieur de la base de donn√©es et manipul√© par le SGBD. 

Les op√©rations de recherche et de manipulation des donn√©es, ainsi que la d√©finition de leurs caract√©ristiques, des r√®gles de coh√©rence et des autorisations d'acc√®s peuvent √™tre exprim√©es sous forme de *requ√™tes* (anglais *query*) dans un langage informatique reconnu par le SGBD. 

**SQL** est le langage informatique le plus populaire, c'est un langage normalis√© de manipulation des bases de donn√©es.  Il existe de nombreux autres langages comme le [Databasic](https://fr.wikipedia.org/wiki/Databasic) de [Charles Bachman](https://fr.wikipedia.org/wiki/Charles_Bachman)[9](https://fr.wikipedia.org/wiki/Syst√®me_de_gestion_de_base_de_donn√©es#cite_note-9), Dataflex, dBase ou xBaseScript, etc.

Les bases de donn√©es peuvent √™tre d'une taille de plusieurs t√©raoctets ; une taille sup√©rieure √† la place disponible dans la m√©moire centrale de l'ordinateur. Les bases de donn√©es sont enregistr√©es sur disque dur, ces derniers ont une capacit√© sup√©rieure, mais sont moins rapides, et le SGBD est √©quip√© de m√©canismes visant √† acc√©l√©rer les op√©rations.  Les SGBD contemporains enregistrent non seulement les donn√©es, mais √©galement leur description, des formulaires, la d√©finition des comptes rendus, les r√®gles de coh√©rence, de proc√©dures; ils permettent le stockage de vid√©os et d'images. Le SGBD manipule les structures complexes n√©cessaire √† la conservation de ces informations.

Les SGBD sont √©quip√©s de m√©canismes qui effectuent des v√©rifications √† l'insu de l'utilisateur, en vue d'assurer la r√©ussite des transactions, √©viter des probl√®mes dus aux acc√®s concurrents et assurer la s√©curit√© des donn√©es. 



### b. Objectifs. 

- Le syst√®me doit assurer la persistance des donn√©es. Ceci consiste √† garder en m√©moire des versions ant√©rieures lorsque des modifications sont effectu√©es.  
- Le syst√®me doit g√©rer des acc√®s concurrents et la s√©curit√©. Il g√®re les droits et privil√®ges d'un utilisateur ou d'un groupe d'utilisateurs sur un ensemble d'objets. 
- Le syst√®me doit fournir un acc√®s aux donn√©es efficace. Pour cela, il faut disposer d'algorithmes performants. 



## III. Le langage SQL.

SQL ou  ¬ª Structured Query Language  ¬ª est un langage de programmation permettant de **manipuler les donn√©es et les syst√®mes de bases de donn√©es relationnelles**. Ce langage permet principalement de communiquer avec les bases de donn√©es afin de g√©rer les donn√©es qu‚Äôelles contiennent.

Il permet notamment de stocker, de manipuler et de retrouver ces donn√©es. Il est aussi possible **d‚Äôeffectuer des requ√™tes**, de mettre √† jour les donn√©es, de les r√©organiser, ou encore de cr√©er et de modifier le sch√©ma et la structure d‚Äôun syst√®me de base de donn√©es et de contr√¥ler l‚Äôacc√®s √† ses donn√©es.

### a. Support.

Nous utiliserons deux supports. 

#### 1. mysql

**MySQL**est un syst√®me de gestion de bases de donn√©es relationnelles (SGBDR). Il est distribu√© sous une double licence  GPL et propri√©taire. Il fait partie des logiciels de gestion de base de donn√©es les plus utilis√©s au monde autant par le grand public (applications web principalement) que par des professionnels, en concurrence avec Oracle, PostgreSQL et Microsoft SQL Server. 

Pour y acc√©der au lyc√©e, on utilisera la console MySQL. 

Pour la faire appara√Ætre, il suffit de saisir la commande `mysql`sur votre terminal. 

Cela devrait afficher quelques lignes, mais la derni√®re doit √™tre:

```
mysql >
```

C'est l'invite de commande mySQL, vous √™tes pr√™t √† travailler. 

#### 2. Db browser for SQLite. 

***SQLite***  est une  biblioth√®que √©crite en langage C qui propose un moteur de base de donn√©es relationnelle  accessible par le langage SQL. 

Contrairement aux serveurs de bases de donn√©es traditionnels, comme MySQL, sa particularit√© est de ne pas reproduire le sch√©ma habituel client-serveur mais d'√™tre directement int√©gr√©e aux programmes. L'int√©gralit√© de la base de donn√©es (d√©clarations, tables, index et donn√©es) est stock√©e dans un fichier ind√©pendant de la plateforme. 

DB Browser for SQLite est un logiciel gratuit et libre permettant de cr√©er et de manipluer des bases de donn√©es sans avoir besoin d'un serveur. 

Pour le t√©l√©charger, vous pouvez utiliser le lien suivant: https://sqlitebrowser.org

### b. Les requ√™tes en √©criture. 

Afin de mettre √† jour la base de donn√©es on peut r√©aliser des **requ√™tes**.

#### Requ√™te INSERT INTO

L‚Äô**ajout de nouvelles donn√©es** dans une table s‚Äôeffectue avec une requ√™te `INSERT INTO` dont voici le mod√®le :

```sql
------------------------------------------------------
INSERT INTO TableName (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...);
------------------------------------------------------
```

Exemples :

```sql
-- Ajout en fournissant toutes les donn√©es
INSERT INTO Clients
VALUES (7, 'SHOWKANAPE', 'Oph√©lie', 23, 'Niort');
-- Ajout en s√©lectionnant les colonnes concern√©es
INSERT INTO Clients (nom, prenom)
VALUES ('SHOWKANAPE', 'Oph√©lie');
```

Remarque : la clef primaire est rarement renseign√©e car elle est tr√®s souvent configur√©e pour s‚Äôauto-incr√©menter automatiquement

#### Requ√™te UPDATE

La **mise √† jour** de donn√©es existantes dans une table s‚Äôeffectue avec une requ√™te UPDATE dont voici le mod√®le :

```sql
--------------------------------------------
UPDATE TableName
SET column1 = value1, column2 = value2, ...
WHERE condition;
--------------------------------------------
```

Exemples :

```sql
-- Modification de l'√¢ge
UPDATE Clients
SET age = 25
WHERE id_client = 7;
-- Modification de l'√¢ge et du pr√©nom
UPDATE Clients
SET age = 25, prenom = 'Ofely'
WHERE id_client = 7;
```

#### Requ√™te DELETE

La **suppression de donn√©es existantes** dans une table s‚Äôeffectue avec une requ√™te DELETE dont voici le mod√®le :

```sql
----------------------
DELETE FROM TableName
WHERE condition;
----------------------
```

Exemples :

```sql
-- Suppression d'un client
DELETE FROM Clients
WHERE id_client = 7;
```

### c. Les requ√™tes d‚Äôinterrogation (SELECT, FROM, WHERE)

> d√©finition : La **s√©lection des donn√©es **dans une table s‚Äôeffectue avec une requ√™te `SELECT` dont voici le mod√®le. La clause WHERE est optionnelle.

```sql
----------------------------
SELECT column1, column2, ...
FROM TableName
WHERE condition;
----------------------------
```

Exemples :

```sql
-- S√©lection des noms et pr√©noms de tous les clients
SELECT nom, prenom
FROM Clients;
-- S√©lection de tous les attributs de tous les clients
SELECT *
FROM Clients;
-- S√©lection du nom de tous les clients niortais
SELECT nom
FROM Clients
WHERE ville = 'Niort';
-- S√©lection du nom et age des "jeunes" clients niortais
SELECT nom, age
FROM Clients
WHERE ville = 'Niort'
AND age < 30;
```



Parfois une colonne peut contenir des valeurs identiques qu‚Äôon pourra filtrer en ajoutant le mot clef `DISTINCT` juste apr√®s `SELECT` :

```sql
-- On ne s√©lectionne que les villes distinctes
SELECT DISTINCT ville
FROM Clients;
```

Souvent, on souhaite r√©cup√©rer les donn√©es d‚Äôune table class√©es selon un certain ordre. Le mot clef `ORDER BY` pourra alors √™tre ajout√© √† la fin de la requ√™te `SELECT` :

```sql
-- S√©lection des clients du plus vieux plus jeune
SELECT nom, prenom, age
FROM Clients
ORDER BY age DESC;
-- S√©lection des clients par ordre alphab√©tique
SELECT nom, prenom, age
FROM Clients
ORDER BY nom ASC;
```

Il existe √©galement des fonctions d‚Äôagr√©gation (**AVG, MIN, MAX, SUM, COUNT**) permettant d‚Äôeffectuer diff√©rents calculs statistiques sur un ensemble d‚Äôenregistrements :

```sql
-- Calcul de l'√¢ge moyen de tous les clients
SELECT AVG(age)
FROM Clients;
-- Qui est le plus jeune client ?
SELECT nom, prenom, MIN(age)
FROM Clients;
-- O√π habite le plus vieux client ?
SELECT ville, MAX(age)
FROM Clients;
-- Quel est l'√¢ge cumul√© de tous les clients ?
SELECT SUM(age)
FROM Clients;
-- Combien y a-t-il de clients √† Niort ?
SELECT COUNT(id_client)
FROM Clients
WHERE ville = 'Niort';
```

 *Remarque* : il vaut mieux sous-traiter les calculs au SGBD plut√¥t que les faire soit m√™me en Python, c‚Äôest plus simple et le SGBD le fait en g√©n√©ral plus efficacement.

Quand on souhaite limiter le nombre de lignes dans les r√©sultats, on peut utiliser `LIMIT` comme ici :

```sql
-- On limite √† 3 lignes les r√©sultats
SELECT nom, prenom
FROM Clients
LIMIT 3;
```

Les recherches impliquant des cha√Ænes de caract√®res sont plus ais√©es avec `LIKE` car on peut lui associer des filtres

```sql
-- Recherche des noms comme Axxxxx
SELECT nom
FROM Clients
WHERE nom LIKE 'A%';
-- Recherche des noms comme xDxxxxxx
SELECT nom
FROM Clients
WHERE nom LIKE '_D%';
```

 *Remarque* : on peut √©galement utiliser l‚Äôop√©rateur OR et les parenth√®ses pour construire des clauses WHERE plus sophistiqu√©es

### d. Requ√™tes avec jointures (JOIN)

> d√©finition : Les **jointures** comme le nom l‚Äôindique permettent de joindre les donn√©es issues de 2 tables diff√©rentes.
> Les jointures utilisent les **clefs primaires et √©trang√®res** pour r√©aliser la relation entre les 2 tables.

```sql
---------------------------------------------------
SELECT TableName1.column3, TableName2.column5, ...
FROM TableName1
INNER JOIN TableName2
ON TableName1.column2 = TableName2.column1;
---------------------------------------------------
Exemple :
-- Affiche qui a emprunt√© quoi
SELECT Clients.nom, Clients.prenom, Livres.nom
FROM Clients
INNER JOIN Livres
ON Clients.id_client = Livres.id_client_fk;
-- Affiche les livres emprunt√©s par BIJOBA Jo
SELECT Livres.nom
FROM Clients
INNER JOIN Livres
ON Clients.id_client = Livres.id_client_fk
WHERE Clients.nom = 'BIJOBA';
```

 *Remarque1* : 

- pour √©viter les conflits de nom de colonne, il est pr√©f√©rable d‚Äôajouter en *pr√©fixe le nom de la table*.

- les mots `WHERE`, `DISTINCT`, `AVG`, `MIN`, `MAX`, `SUM`, `COUNT`, `LIMIT` et `LIKE` sont utilisables √©galement avec les jointures.

- il existe plusieurs types de jointures INNER, LEFT, RIGHT, FULL... mais c‚Äôest la jointure INNER qui est la plus utilis√©e et au programme en NSI.

  ![](D:\DISQUE ESSB\lycee\T NSI\base de donn√©es\inner.png)

### e. Contraintes d‚Äôint√©grit√©. 

Nous avons √©voqu√© les contraintes d‚Äôint√©grit√© que l‚Äôon pouvait ajouter pour rendre les donn√©es plus coh√©rentes et robustes. Ces contraintes peuvent √™tre ajout√©es lors de la cr√©ation des tables. La plupart des outils graphiques proposent une m√©thode simple pour le faire. Dans ce qui suit, on observera comment cela est possible avec le langage SQL.

#### 1. Contrainte de domaine

Ce premier exemple propose une cr√©ation de table avec le choix pour chaque attribut d‚Äôun domaine ou type particulier ainsi que de v√©rifications plus sp√©cifiques avec le mot clef `CHECK`

```sql
-- Choix des domaines pour les attributs de la table Clients
CREATE TABLE "Clients" (
"nom" TEXT,
"prenom" TEXT,
"age" INTEGER,
"ville" TEXT
);
```

On peut aussi y ajouter des v√©rifications plus sp√©cifiques avec le mot clef `CHECK` et des **conditions** :

```sql
-- Choix des domaines pour les attributs de la table Clients
CREATE TABLE "Clients" (
"nom" TEXT,
"prenom" TEXT CHECK(length(prenom) <= 30),
"age" INTEGER CHECK(age>0 AND age<200),
"ville" TEXT CHECK(ville IN ('Niort', 'Aiffres'))
);
---
```

üìù A noter que les domaines/types propos√©s varient d‚Äôun SGBD √† l‚Äôautre. Se r√©f√©rer √† la documentation technique du SGBD pour en conna√Ætre les d√©tails.

#### 2. Contrainte de relation

Afin de rendre chaque enregistrement unique, on ajoute une **clef primaire** id_client de type `INTEGER` avec les mots-clefs `PRIMARY KEY`.

Le param√©trage `AUTOINCREMENT` permet d‚Äôauto-incr√©menter la valeur de chaque enregistrement √† chaque requ√™te `INSERT INTO` sans avoir √† se soucier des valeurs d√©j√† dans la table.

```sql
CREATE TABLE "Clients" (
"id_client" INTEGER PRIMARY KEY AUTOINCREMENT,
"nom" TEXT,
"prenom" TEXT,
"age" INTEGER CHECK(age>0 AND age<200),
"ville" TEXT CHECK(ville IN ('Niort','Aiffres'))
);
```

#### 3. Contrainte de r√©f√©rence

La contrainte de r√©f√©rence se fera en ajoutant une **clef √©trang√®re** dans la table Livres r√©f√©ren√ßant la clef primaire de la table Clients. Les mots-clefs FOREIGN KEY et REFERENCES sont alors utilis√©s :

```sql
-- Table Livres avec tous ses attributs
CREATE TABLE "Livres" (
"id_livre" INTEGER PRIMARY KEY AUTOINCREMENT,
"nom" TEXT,
"prix" REAL,
"id_client_fk" INTEGER,
FOREIGN KEY("id_client_fk") REFERENCES "Clients"("id_client")
);
```
